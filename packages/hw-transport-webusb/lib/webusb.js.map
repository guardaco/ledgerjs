{"version":3,"sources":["../src/webusb.js"],"names":["requestLedgerDevice","ledgerDevices","vendorId","productId","isLedgerDevice","some","info","device","Promise","resolve","then","navigator","usb","requestDevice","filters","isSupported","getLedgerDevices","getDevices","devices","filter"],"mappings":";;;;;;;;QAcgBA,mB,GAAAA,mB;AAZhB,IAAMC,gBAAgB,CACpB,EAAEC,UAAU,MAAZ,EAAoBC,WAAW,MAA/B,EADoB,EAEpB,EAAED,UAAU,MAAZ,EAFoB,CAAtB;;AAKA,IAAME,iBAAiB,SAAjBA,cAAiB;AAAA,SACrBH,cAAcI,IAAd,CACE;AAAA,WACE,CAAC,CAACC,KAAKH,SAAN,IAAmBG,KAAKH,SAAL,KAAmBI,OAAOJ,SAA9C,MACC,CAACG,KAAKJ,QAAN,IAAkBI,KAAKJ,QAAL,KAAkBK,OAAOL,QAD5C,CADF;AAAA,GADF,CADqB;AAAA,CAAvB;;AAOO,SAASF,mBAAT,GAAmD;AACxD,SAAOQ,QAAQC,OAAR,GAAkBC,IAAlB,CAAuB;AAAA;AAC5B;AACAC,gBAAUC,GAAV,CAAcC,aAAd,CAA4B,EAAEC,SAASb,aAAX,EAA5B;AAF4B;AAAA,GAAvB,CAAP;AAID;;AAEM,IAAMc,oCAAc,SAAdA,WAAc;AAAA,SACzBP,QAAQC,OAAR,CACE,QAAOE,SAAP,yCAAOA,SAAP,OAAqB,QAArB;AACE;AACA,UAAOA,UAAUC,GAAjB,MAAyB,QAH7B,CADyB;AAAA,CAApB;;AAOA,IAAMI,8CAAmB,SAAnBA,gBAAmB;AAAA,SAC9BR,QAAQC,OAAR,GACGC,IADH,CACQ;AAAA;AACJ;AACAC,gBAAUC,GAAV,CAAcK,UAAd;AAFI;AAAA,GADR,EAKGP,IALH,CAKQ;AAAA,WAAWQ,QAAQC,MAAR,CAAef,cAAf,CAAX;AAAA,GALR,CAD8B;AAAA,CAAzB","file":"webusb.js","sourcesContent":["// @flow\n\nconst ledgerDevices = [\n  { vendorId: 0x2581, productId: 0x3b7c },\n  { vendorId: 0x2c97 }\n];\n\nconst isLedgerDevice = device =>\n  ledgerDevices.some(\n    info =>\n      (!info.productId || info.productId === device.productId) &&\n      (!info.vendorId || info.vendorId === device.vendorId)\n  );\n\nexport function requestLedgerDevice(): Promise<USBDevice> {\n  return Promise.resolve().then(() =>\n    // $FlowFixMe\n    navigator.usb.requestDevice({ filters: ledgerDevices })\n  );\n}\n\nexport const isSupported = (): Promise<boolean> =>\n  Promise.resolve(\n    typeof navigator === \"object\" &&\n      // $FlowFixMe\n      typeof navigator.usb === \"object\"\n  );\n\nexport const getLedgerDevices = (): Promise<USBDevice[]> =>\n  Promise.resolve()\n    .then(() =>\n      // $FlowFixMe\n      navigator.usb.getDevices()\n    )\n    .then(devices => devices.filter(isLedgerDevice));\n"]}